{% extends "layout.html" %}

{% block title %}Register Patent - Patent Registry{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <!-- Form Header -->
    <div class="text-center mb-8">
        <h1 class="text-3xl font-bold mb-2">Register Your Patent</h1>
        <p class="text-gray-600 dark:text-gray-300">Complete the form below to register your intellectual property as a patent on the blockchain.</p>
    </div>
    
    <!-- Registration Form -->
    <div class="card p-6">
        <form action="/submit_registration" method="post" class="space-y-6">
            <div class="form-group">
                <label for="title" class="form-label">Patent Title</label>
                <input type="text" id="title" name="title" class="form-input" required placeholder="Enter a descriptive title for your patent">
            </div>
            
            <div class="form-group">
                <label for="description" class="form-label">Description</label>
                <textarea id="description" name="description" rows="6" class="form-textarea" required placeholder="Provide a detailed description of your patent"></textarea>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="form-group">
                    <label for="patent_type" class="form-label">Patent Type</label>
                    <select id="patent_type" name="patent_type" class="form-select" required>
                        <option value="" disabled selected>Select patent type</option>
                        <option value="utility">Utility Patent</option>
                        <option value="design">Design Patent</option>
                        <option value="plant">Plant Patent</option>
                        <option value="software">Software Patent</option>
                        <option value="business_method">Business Method Patent</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="inventor_name" class="form-label">Inventor Name</label>
                    <input type="text" id="inventor_name" name="inventor_name" class="form-input" required placeholder="Enter the name of the inventor">
                </div>
            </div>
            
            <div class="form-group">
                <label for="filing_date" class="form-label">Filing Date</label>
                <input type="date" id="filing_date" name="filing_date" class="form-input" value="{{ today_date }}" max="{{ today_date }}">
            </div>
            
            <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r my-6">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <i class="fas fa-info-circle text-blue-500 dark:text-blue-400"></i>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-blue-700 dark:text-blue-300">
                            <strong>Note:</strong> By submitting this form, you are requesting to register your patent on the blockchain. A deposit of 0.01 ETH is required for processing. Once approved, your patent will be minted as an NFT and registered on the blockchain.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-end space-x-4 pt-4">
                <a href="/" class="btn btn-outline">Cancel</a>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-file-signature mr-2"></i>Submit Patent Registration
                </button>
            </div>
        </form>
    </div>
    
    <!-- Additional Information -->
    <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card hover:border-blue-500">
            <div class="text-blue-500 dark:text-blue-400 text-3xl mb-4">
                <i class="fas fa-shield-alt"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2">Secure Ownership</h3>
            <p class="text-gray-600 dark:text-gray-300">Your patent will be securely registered on the blockchain, providing immutable proof of ownership and timestamp.</p>
        </div>
        
        <div class="card hover:border-purple-500">
            <div class="text-purple-500 dark:text-purple-400 text-3xl mb-4">
                <i class="fas fa-exchange-alt"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2">Trade Patents</h3>
            <p class="text-gray-600 dark:text-gray-300">Once registered, you can list your patent for sale or transfer ownership securely through our marketplace.</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Form validation
        const registrationForm = document.querySelector('form');
        
        registrationForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check if wallet is connected
            const savedWallet = localStorage.getItem('wallet_address');
            if (!savedWallet) {
                alert('Please connect your wallet first to register a patent.');
                return;
            }
            
            // Validate form fields
            const title = document.getElementById('title').value.trim();
            const description = document.getElementById('description').value.trim();
            const patentType = document.getElementById('patent_type').value;
            const inventorName = document.getElementById('inventor_name').value.trim();
            
            if (!title || !description || !patentType || !inventorName) {
                alert('Please fill in all required fields.');
                return;
            }
            
            // Submit the form
            this.submit();
        });
    });
</script>
{% endblock %}